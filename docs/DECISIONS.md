# Technical Decisions

Документация ключевых технических решений проекта.

## Почему REST API вместо SDK для Yandex AI Studio?

**Решение**: Прямые REST API вызовы через `aiohttp` вместо `yandex-cloud-ml-sdk`.

**Причины**:
1. **Конфликты зависимостей**: `yandexcloud` требует `requests>=2.32.3`, но `spacy` требует `<2.32.0`
2. **Размер Docker образа**: SDK добавляет ~45MB лишних зависимостей
3. **Простота**: Используем только один endpoint `/v1/responses`
4. **Прозрачность**: Полный контроль над HTTP запросами и таймаутами

**Реализация**: `core/yandex_ai_client.py:207-288`

## Таймаут для агентов: 120 секунд

**Решение**: `timeout=aiohttp.ClientTimeout(total=120)`

**Причина**: Agent #1 (words) обрабатывает большие тексты и превышал 60-секундный лимит.

**История**:
- Первоначально: 60s
- Проблема: TimeoutError для агента слов
- Решение: 120s (commit 9e47241)

## Лемматизация через spaCy

**Решение**: `spacy` с моделью `en_core_web_sm` + `pymorphy2` для русского.

**Причина**: Удаление дубликатов (amplify/amplifying/amplified → одна лемма).

**Альтернативы**: NLTK (медленнее), собственная реализация (сложнее).
